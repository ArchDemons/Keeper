<?xml version="1.0" encoding="UTF-8"?>
<nifty xmlns="http://nifty-gui.sourceforge.net/nifty-1.3.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <useStyles filename="nifty-default-styles.xml" />
    <useStyles filename="Interface/CustomTabStyle.xml" />
    <useControls filename="nifty-default-controls.xml" />
    <useControls filename="Interface/MyControls.xml" />
    <useControls filename="Interface/CustomTabControl.xml" />
    <!--<resourceBundle id="menu" filename="Interface/Texts/Text" />-->
     <style id="textManaChange">
        <attributes font="Interface/Fonts/Ingame10.fnt" />
    </style>
    <style id="textSmall">
        <attributes font="Interface/Fonts/Ingame16.fnt" color="#bbbcbb" />
    </style>
    <style id="text">
        <attributes font="Interface/Fonts/Ingame18.fnt" />
    </style>
    <style id="textNormal">
        <attributes font="Interface/Fonts/Ingame28.fnt" color="#bbbcbb" />
    </style>
    <!-- +++++++++++++++++++++++++++++++++++++++ -->
    <!-- HUD -->
    <!-- +++++++++++++++++++++++++++++++++++++++ -->
    <screen id="hud" controller="toniarts.openkeeper.game.state.PlayerState">

        <layer childLayout="vertical">
            <!--The upper panel-->
            <panel height="72px" width="100%" align="left" valign="top" childLayout="center">

                <panel width="100%" childLayout="horizontal">
                    <panel height="65%" width="*" valign="center" backgroundImage="Textures/GUI/Windows/Bar-00.png" imageMode="repeat:0,0,128,64" />
                    <panel height="80%" width="64px" valign="center" backgroundImage="Textures/GUI/Windows/Bar-02.png" imageMode="repeat:0,0,128,64" />
                </panel>

                <panel width="100%" childLayout="horizontal">
                    <panel width="256px" align="left" valign="center" childLayout="overlay">
                        <panel childLayout="horizontal" align="left" valign="center">
                            <image valign="center" filename="Textures/GUI/Windows/Mana-Bg-00.png" />
                            <image valign="center" filename="Textures/GUI/Windows/Mana-Bg-01.png" />
                        </panel>
                        <panel childLayout="horizontal" valign="center">
                            <panel backgroundImage="Textures/GUI/Windows/heart-hp.png" childLayout="center" valign="center">
                                <image filename="Textures/GUI/Windows/heart-bg.png" align="left" valign="center">
                                    <effect>
                                        <onHover name="imageOverlay" filename="Textures/GUI/Windows/heart-alarm.png" post="true" neverStopRendering="true" />
                                    </effect>
                                </image>
                            </panel>
                            <panel childLayout="vertical" valign="center" padding="0px,14px,0px,10px">
                                <control name="label" id="mana" color="#27d067" style="text" width="100%" text="0" textHAlign="right" valign="center" />
                                <panel childLayout="horizontal" valign="center">
                                    <control name="label" id="manaGet" color="#27d067" text="0" style="textManaChange" width="50%" textHAlign="left" />
                                    <control name="label" id="manaLose" color="#ec0000" text="0" style="textManaChange" width="*" textHAlign="right" />
                                </panel>
                            </panel>
                        </panel>
                    </panel>
                    <panel width="16px" /> 
                    <panel width="256px" align="left" valign="center" childLayout="overlay">
                        <panel childLayout="horizontal" align="left" valign="center">
                            <image valign="center" filename="Textures/GUI/Windows/gold-bg-00.png" />
                            <image valign="center" filename="Textures/GUI/Windows/gold-bg-01.png" />
                        </panel>
                        <panel childLayout="horizontal" valign="center">
                            <panel backgroundImage="Textures/GUI/Windows/payday-Hp.png" childLayout="center" valign="center">
                                <image filename="Textures/GUI/Windows/payday-BG.png" align="left" valign="center" />
                            </panel>
                            <panel childLayout="center" valign="center" align="center" padding="0px,14px,0px,36px">
                                <control name="label" id="gold" color="#D3B000" text="0" style="text" width="100%" textHAlign="right" valign="center" />
                            </panel>
                        </panel>
                    </panel>

                    <panel width="*" align="left" valign="center" childLayout="center">
                        <control name="label" id="tooltip" style="textSmall" text="" />
                    </panel>
                    <panel width="64px" align="left" valign="center" />
                </panel>
            </panel>
            <!--Empty center-->
            <panel height="*" width="100%" id="middle" />
            <!--The bottom panel-->
            <panel height="214px" width="100%" align="left" valign="bottom" childLayout="overlay">
                <!-- first bottom layer -->
                <panel childLayout="vertical" width="100%" align="left" valign="top">
                    <!--The top bar-->
                    <panel height="64px" width="100%" childLayout="horizontal" align="left" valign="top">
                        <panel height="75%" width="*" valign="center" backgroundImage="Textures/GUI/Windows/Bar-00.png" imageMode="repeat:0,0,128,64" />
                        <panel height="100%" width="128px" valign="center" backgroundImage="Textures/GUI/Windows/Bar-02.png" imageMode="repeat:0,0,128,64" />
                    </panel>
                    <!--Map (place for it) & the works-->
                    <panel height="*" width="100%" childLayout="horizontal" align="left" valign="top" padding="6px,0px,6px,0px">
                        <panel width="200px" />
                        <panel id="bottomBackgroundPanel" width="*" height="*" backgroundImage="Textures/GUI/Windows/Panel-BG.png"
                               imageMode="repeat:0,0,64,64" />
                    </panel>
                </panel>
                 <!-- second bottom layer -->
                <panel childLayout="horizontal" width="100%" align="left" valign="top">
                    <!--The map-->
                    <panel height="100%" width="200px" valign="top" childLayout="center" padding="0px,6px,6px,6px">
                        <panel padding="10px,10px,10px,10px" childLayout="center">
                            <panel backgroundImage="Textures/GUI/Map/Map-BG.png" />
                        </panel>
                        <panel valign="center" backgroundImage="Textures/GUI/Map/map.png" childLayout="absolute-inside" width="100%"
                               imageMode="resize:54,2,54,54,54,2,54,2,54,2,54,54">
                            <panel x="0" y="0" width="32px" height="32px">
                                <effect>
                                    <onHover name="imageOverlay" filename="Textures/GUI/Map/mapbf-00.png" post="true"/>
                                    <onClick name="imageOverlay" filename="Textures/GUI/Map/selected-mapbf-00.png" post="true"/>
                                </effect>
                            </panel>

                            <!--Sell-->
                            <panel id="sellButton" x="100%" y="0" width="32px" height="32px">
                                <effect>
                                    <onHover name="imageOverlay" filename="Textures/GUI/Map/mapbf-01.png" post="true"/>
                                    <onCustom name="imageOverlay" customKey="select" filename="Textures/GUI/Map/selected-mapbf-01.png" post="true" neverStopRendering="true"  />
                                </effect>
                                <interact onClick="sellMode()"/>
                            </panel>
                            <!--The menu-->
                            <panel id="menuButton" x="0" y="100%" width="32px" height="32px">
                                <effect>
                                    <onHover name="imageOverlay" filename="Textures/GUI/Map/mapbf-02.png" post="true"/>
                                    <onCustom name="imageOverlay" customKey="select" filename="Textures/GUI/Map/selected-mapbf-02.png" post="true" neverStopRendering="true"  />
                                </effect>
                                <interact onClick="pauseMenu()"/>
                            </panel>

                            <panel x="100%" y="100%" width="32px" height="32px">
                                <effect>
                                    <onHover name="imageOverlay" filename="Textures/GUI/Map/mapbf-03.png" post="true"/>
                                    <onClick name="imageOverlay" filename="Textures/GUI/Map/selected-mapbf-03.png" post="true"/>
                                </effect>
                            </panel>
                        </panel>
                    </panel>
                    <!-- bottom middle -->
                    <panel height="100%" width="*" childLayout="overlay">
                        <!-- popup messages and objective -->
                        <panel width="100%" height="100%" childLayout="vertical">
                            <panel childLayout="horizontal" width="*" height="64px" paddingLeft="280px">
                                <!-- Objective -->
                                <image valign="center" filename="Textures/GUI/Tabs/Messages/mt-objective-00.png" marginLeft="6px">
                                    <effect>
                                        <onHover name="imageOverlay" filename="Textures/GUI/Tabs/Messages/mt-objective-01.png" post="true"/>
                                    </effect>
                                </image>
                                <!-- Messages -->
                                <image valign="center" filename="Textures/GUI/Tabs/Messages/mt-info-00.png" marginLeft="4px">
                                    <effect>
                                        <onHover name="imageOverlay" filename="Textures/GUI/Tabs/Messages/mt-info-01.png" post="true"/>
                                    </effect>
                                </image>
                                <image valign="center" filename="Textures/GUI/Tabs/Messages/mt-creature-00.png" marginLeft="4px" visible="false">
                                    <effect>
                                        <onHover name="imageOverlay" filename="Textures/GUI/Tabs/Messages/mt-creature-01.png" post="true"/>
                                    </effect>
                                </image>
                                <image valign="center" filename="Textures/GUI/Tabs/Messages/mt-fight-00.png" marginLeft="4px" visible="false">
                                    <effect>
                                        <onHover name="imageOverlay" filename="Textures/GUI/Tabs/Messages/mt-fight-01.png" post="true"/>
                                        <onActive name="imageOverlayPulsate" filename="Textures/GUI/Tabs/Messages/mt-fight-02.png" post="true"/>
                                    </effect>
                                </image>
                                <image valign="center" filename="Textures/GUI/Tabs/Messages/mt-info-00.png" marginLeft="4px" visible="false">
                                    <effect>
                                        <onHover name="imageOverlay" filename="Textures/GUI/Tabs/Messages/mt-info-01.png" post="true"/>
                                        <onActive name="imageOverlayPulsate" filename="Textures/GUI/Tabs/Messages/mt-info-02.png" post="true"/>
                                    </effect>
                                </image>
                            </panel>
                            <panel width="100%" height="*" />
                        </panel>
                        <!--The rest-->
                            <control name="customTabGroup" height="100%" width="100%" valign="top" >
                                    
                                <control name="customTab" image="Textures/GUI/Tabs/t-creatures.png" active="Textures/GUI/Icons/selected-creature.png">
                                    <panel childLayout="horizontal" align="left">
                                         <!--The worker amount & status-->
                                        <control name="workerAmount"  />
                                        <!--The tab contents scroll-->
                                        <control name="tabScroll" />
                                        <!--The =, shown for creatures-->
                                        <control name="workerEqual" />

                                        <image filename="Textures/GUI/Creatures/Evil/firefly-bg.png" valign="center" marginRight="3px" />
                                        <image filename="Textures/GUI/Creatures/Evil/goblin-bg.png" valign="center" marginRight="3px" />
                                        <image filename="Textures/GUI/Creatures/Evil/warlock-bg.png" valign="center" marginRight="3px" />
                                        <image filename="Textures/GUI/Creatures/Evil/troll-bg.png" valign="center" marginRight="3px" />
                                        <image filename="Textures/GUI/Creatures/Evil/bile_demon-bg.png" valign="center" marginRight="3px" />
                                        <image filename="Textures/GUI/Creatures/Evil/skeleton-bg.png" valign="center" marginRight="3px" />
                                        <image filename="Textures/GUI/Creatures/Evil/dark_elf-bg.png" valign="center" marginRight="3px" />

                                        <image filename="Textures/GUI/Creatures/Good/dwarf-bg.png" valign="center" marginRight="3px" />
                                        <image filename="Textures/GUI/Creatures/Good/elf-bg.png" valign="center" marginRight="3px" />
                                        <image filename="Textures/GUI/Creatures/Good/fairy-bg.png" valign="center" marginRight="3px" />
                                        <image filename="Textures/GUI/Creatures/Good/giant-bg.png" valign="center" marginRight="3px" />
                                        <image filename="Textures/GUI/Creatures/Good/guard-bg.png" valign="center" marginRight="3px" />
                                        <image filename="Textures/GUI/Creatures/Good/knight-bg.png" valign="center" marginRight="3px" />
                                        <image filename="Textures/GUI/Creatures/Good/monk-bg.png" valign="center" marginRight="3px" />
                                        <image filename="Textures/GUI/Creatures/Good/wizard-bg.png" valign="center" marginRight="3px" />

                                    </panel>
                                </control>

                                <control name="customTab" image="Textures/GUI/Tabs/t-rooms.png" active="Textures/GUI/Icons/selected-room.png">                           
                                    <panel childLayout="vertical" align="left">
                                        <panel childLayout="horizontal" padding="3px,3px,0">
                                            <image filename="Textures/GUI/Rooms/lair.png" valign="center" marginRight="3px" />
                                            <image filename="Textures/GUI/Rooms/dark_library.png" valign="center" marginRight="3px" />
                                            <image filename="Textures/GUI/Rooms/Treasury.png" valign="center" marginRight="3px" />
                                            <image filename="Textures/GUI/Rooms/casino.png" valign="center" marginRight="3px" />
                                            <image filename="Textures/GUI/Rooms/Bridge_Wooden.png" valign="center" marginRight="3px" />
                                            <image filename="Textures/GUI/Rooms/torture.png" valign="center" marginRight="3px" />
                                            <image filename="Textures/GUI/Rooms/graveyard.png" valign="center" marginRight="3px" />
                                            <image filename="Textures/GUI/Rooms/temple.png" valign="center" marginRight="3px" />
                                        </panel>
                                        <panel childLayout="horizontal" padding="3px,3px,3px">
                                            <image filename="Textures/GUI/Rooms/hatchery.png" valign="center" marginRight="3px" />
                                            <image filename="Textures/GUI/Rooms/training.png" valign="center" marginRight="3px" />
                                            <image filename="Textures/GUI/Rooms/workshop.png" valign="center" marginRight="3px" />
                                            <image filename="Textures/GUI/Rooms/guard_room.png" valign="center" marginRight="3px" />
                                            <image filename="Textures/GUI/Rooms/prison.png" valign="center" marginRight="3px" />
                                            <image filename="Textures/GUI/Rooms/Bridge_Stone.png" valign="center" marginRight="3px" />
                                            <image filename="Textures/GUI/Rooms/pit.png" valign="center" marginRight="3px" />
                                            <image filename="Textures/GUI/Rooms/tba.png" valign="center" marginRight="3px" />
                                        </panel>
                                    </panel>
                                </control>

                                <control name="customTab" image="Textures/GUI/Tabs/t-spells.png" active="Textures/GUI/Icons/selected-spell.png">
                                    <panel childLayout="vertical" align="left">
                                            <panel childLayout="horizontal" padding="3px,3px,0">
                                            <image filename="Textures/GUI/Spells/create_imp.png" valign="center" marginRight="3px" />
                                            <image filename="Textures/GUI/Spells/possess.png" valign="center" marginRight="3px" />
                                            <image filename="Textures/GUI/Spells/sight_of_evil.png" valign="center" marginRight="3px" />
                                            <image filename="Textures/GUI/Spells/tremor.png" valign="center" marginRight="3px" />
                                            <image filename="Textures/GUI/Spells/create_gold.png" valign="center" marginRight="3px" />
                                        </panel>
                                        <panel childLayout="horizontal" padding="3px,3px,3px">
                                            <image filename="Textures/GUI/Spells/thunderbolt.png" valign="center" marginRight="3px" />
                                            <image filename="Textures/GUI/Spells/heal.png" valign="center" marginRight="3px" />
                                            <image filename="Textures/GUI/Spells/call_to_arms.png" valign="center" marginRight="3px" />
                                            <image filename="Textures/GUI/Spells/turncoat.png" valign="center" marginRight="3px" />
                                            <image filename="Textures/GUI/Spells/inferno.png" valign="center" marginRight="3px" />
                                            <image filename="Textures/GUI/Spells/s-tba.png" valign="center" marginRight="3px" />
                                        </panel>
                                    </panel>
                                </control>

                                <control name="customTab" image="Textures/GUI/Tabs/t-workshop.png" active="Textures/GUI/Icons/selected-workshop.png">
                                    <panel childLayout="vertical" align="left">
                                        <panel childLayout="horizontal" padding="3px,3px,0">
                                            <image filename="Textures/GUI/Doors/wood_door.png" valign="center" marginRight="3px" />
                                            <image filename="Textures/GUI/Doors/braced.png" valign="center" marginRight="3px" />
                                            <image filename="Textures/GUI/Doors/magic_door.png" valign="center" marginRight="3px" />

                                            <image filename="Textures/GUI/Traps/sentry.png" valign="center" marginRight="3px" />
                                            <image filename="Textures/GUI/Traps/fear.png" valign="center" marginRight="3px" />
                                            <image filename="Textures/GUI/Traps/gas.png" valign="center" marginRight="3px" />
                                            <image filename="Textures/GUI/Traps/trigger.png" valign="center" marginRight="3px" />
                                            <image filename="Textures/GUI/Traps/freeze.png" valign="center" marginRight="3px" />
                                            <image filename="Textures/GUI/Traps/fireburst.png" valign="center" marginRight="3px" />
                                        </panel>
                                        <panel childLayout="horizontal" padding="3px,3px,3px">
                                            <image filename="Textures/GUI/Doors/barricade.png" valign="center" marginRight="3px" />
                                            <image filename="Textures/GUI/Doors/steel_door.png" valign="center" marginRight="3px" />
                                            <image filename="Textures/GUI/Doors/secret_door.png" valign="center" marginRight="3px" />

                                            <image filename="Textures/GUI/Traps/Guard_Post.png" valign="center" marginRight="3px" />
                                            <image filename="Textures/GUI/Traps/alarm.png" valign="center" marginRight="3px" />
                                            <image filename="Textures/GUI/Traps/spike.png" valign="center" marginRight="3px" />
                                            <image filename="Textures/GUI/Traps/boulder.png" valign="center" marginRight="3px" />
                                            <image filename="Textures/GUI/Traps/lightning.png" valign="center" marginRight="3px" />
                                            <image filename="Textures/GUI/Traps/w-tba.png" valign="center" marginRight="3px" />
                                        </panel>
                                    </panel>
                                </control>   
                            </control>
                      
                    </panel>
                    <!-- bottom right -->                
                    <panel width="128px" height="100%" valign="center" align="right" childLayout="vertical">
                        <panel height="64px" childLayout="horizontal">
                            <!-- place for fight or call to arm -->
                            <control name="fight" visible="false" />
                        </panel>
                        <!-- Reaper -->
                        <panel childLayout="center" align="center" valign="center" height="*" width="100%">                            
                            <control name="reaperTalisman"/>
                        </panel>
                    </panel>
                </panel>                
            </panel>
        </layer>

        <layer id="optionsMenu" childLayout="vertical" visible="false">
            <panel id="top" height="72px" width="100%" align="left" valign="top" childLayout="center">
                <!--Filler-->
            </panel>

            <panel id="menu" backgroundColor="#0008" height="*" width="100%" align="left" valign="top" childLayout="vertical" visibleToMouse="true" paddingLeft="3px">
                <panel width="100%" align="left" valign="top" childLayout="vertical">
                    <control name="label" id="optionsMenuTitle" style="textNormal" text="${menu.94}"></control>
                </panel>

                <!--Two columns of options-->
                <panel width="100%" align="left" valign="top" childLayout="horizontal">
                    <panel id="optionsColumnOne" width="50%" align="left" valign="top" childLayout="vertical" paddingLeft="3px">
                        <control click="pauseMenu()" text="${menu.537}" glyph="Textures/GUI/Options/i-objective.png" name="iconText" />
                        <control click="pauseMenu()" text="${menu.97}" glyph="Textures/GUI/Options/i-game.png" name="iconText" />
                        <control click="pauseMenu()" text="${menu.143}" glyph="Textures/GUI/Options/i-load.png" name="iconText" />
                        <control click="pauseMenu()" text="${menu.201}" glyph="Textures/GUI/Options/i-save.png" name="iconText" />
                    </panel>
                    <panel id="optionsColumnTwo" width="50%" align="left" valign="top" childLayout="vertical" paddingLeft="3px">
                        <control click="quitToMainMenu()" text="${menu.1266}" glyph="Textures/GUI/Options/i-quit.png" name="iconText" />
                        <control click="pauseMenu()" text="${menu.1269}" glyph="Textures/GUI/Options/i-restart.png" name="iconText" />
                    </panel>
                </panel>

                <!--Menu navigation-->
                <panel width="100%" align="left" valign="bottom" childLayout="horizontal" paddingBottom="10px" paddingLeft="3px">
                    <panel id="optionsNavigationColumnOne" width="50%" align="left" valign="bottom" childLayout="vertical" paddingLeft="3px">
                        <control click="pauseMenu()" text="${menu.142}" glyph="Textures/GUI/Options/i-accept.png" name="iconText" />
                    </panel>
                    <panel id="optionsNavigationColumnTwo" width="50%" align="left" valign="bottom" childLayout="vertical" paddingLeft="3px">
                    </panel>
                </panel>
            </panel>

            <!--The bottom panel-->
            <panel id="bottom" height="212px" width="100%" align="left" valign="bottom" childLayout="center">
                <!--Filler-->
            </panel>
        </layer>

    </screen>

    <screen id="cinematic" controller="toniarts.openkeeper.game.state.PlayerState">

        <layer id="background" childLayout="vertical">

            <!--The upper panel-->
            <panel id="top" height="72px" width="100%" align="left" valign="top" childLayout="horizontal">
                <panel height="65%" width="*" valign="center" backgroundImage="Textures/GUI/Windows/Bar-00.png" imageMode="repeat:0,0,128,64" />
                <panel height="80%" width="64px" valign="center" backgroundImage="Textures/GUI/Windows/Bar-02.png" imageMode="repeat:0,0,128,64" />
            </panel>

            <!--Empty center-->
            <panel id="center" height="*" width="100%" childLayout="horizontal" />

            <!--The bottom panel-->
            <panel id="bottom" height="180px" width="100%" align="left" valign="bottom" childLayout="vertical">

                <!--The top bar-->
                <panel height="64px" width="100%" childLayout="horizontal" align="left" valign="top">
                    <panel height="65%" width="*" valign="center" backgroundImage="Textures/GUI/Windows/Bar-00.png" imageMode="repeat:0,0,128,64" />
                    <panel height="90%" width="128px" valign="center" backgroundImage="Textures/GUI/Windows/Bar-02.png" imageMode="repeat:0,0,128,64" />
                </panel>

                <!--Map (place for it) & the works-->
                <panel height="*" width="100%" childLayout="horizontal" align="left" valign="top" padding="6px,10px,6px,10px">
                    <panel width="180px" />
                    <panel id="bottomBackgroundPanel" width="*" height="*" backgroundImage="Textures/GUI/Windows/Panel-BG.png"
                           imageMode="repeat:0,0,64,64"  margin="0px,6px,0px,10px"/>
                </panel>
            </panel>

        </layer>
    </screen>

</nifty>
